<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SCAE - Dashboard Assistente Social</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/dashboard_assistente.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Menu Toggle Button (visible when sidebar is collapsed) -->
    <button class="menu-toggle" id="menuToggle">
        <i class="bi bi-list"></i>
    </button>

    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <button class="close-sidebar" id="closeSidebar">
                <i class="bi bi-x-lg"></i>
            </button>
            <img src="/static/img/logoifes.png" alt="Logo IFES" width="180">
        </div>
        <div class="d-flex flex-column p-3">
            <div class="mb-4 text-center">
                <h6 class="mb-0">Sistema de Controle de</h6>
                <h6>Assistência Estudantil</h6>
            </div>
            <ul class="nav nav-pills flex-column mb-auto">
                <li class="nav-item">
                    <a href="#" class="nav-link active">
                        <i class="bi bi-speedometer2"></i> <span>Início</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/assistente/analise-inscricoes" class="nav-link">
                        <i class="bi bi-clipboard-check"></i> <span>Análise de Inscrições</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/assistente/analise-recursos" class="nav-link">
                        <i class="bi bi-journal-text"></i> <span>Análise de Recursos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/assistente/alunos" class="nav-link">
                        <i class="bi bi-people"></i> <span>Alunos</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/assistente/entrevistas" class="nav-link">
                        <i class="bi bi-file-earmark-text"></i> <span>Entrevistas Agendadas</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/assistente/relatorios" class="nav-link">
                        <i class="bi bi-file-earmark-bar-graph"></i> <span>Relatórios</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/assistente/agenda" class="nav-link">
                        <i class="bi bi-calendar-event"></i> <span>Agenda</span>
                    </a>
                </li>
            </ul>
            <hr>
            <div class="text-center">
                <a href="/" class="btn btn-outline-danger">
                    <i class="bi bi-box-arrow-right"></i> <span>Sair</span>
                </a>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content" id="mainContent">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Dashboard Assistente Social</h2>
            <div class="user-profile">
                <img src="/static/img/perfil.jpg" alt="Perfil">
                <div>
                    <small class="text-muted">Assistente Social</small>
                    <div class="fw-bold">Mariana Costa</div>
                </div>
            </div>
        </div>

        <div class="welcome-banner">
            <div class="row">
                <div class="col-md-9">
                    <h4>Bem-vindo ao Painel do Assistente Social</h4>
                    <p>Aqui você pode analisar inscrições, gerenciar entrevistas e acompanhar a situação socioeconômica dos alunos.</p>
                </div>
            </div>
        </div>

         <div class="row mb-4">
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="number">3</div>
                    <div class="label">Editais Ativos</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="number">127</div>
                    <div class="label">Inscrições Pendentes</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="number">342</div>
                    <div class="label">Alunos Beneficiados</div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="stats-card">
                    <div class="number">R$ 68.400</div>
                    <div class="label">Valor Total Mensal</div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="table-card h-100">
                    <div class="card-header d-flex justify-content-between align-items-center">
                        <span>Inscrições para Análise</span>
                        <a href="#" class="btn btn-sm btn-light">Ver Todas</a>
                    </div>
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Aluno</th>
                                    <th>Auxílio</th>
                                    <th>Data</th>
                                    <th>Prioridade</th>
                                    <th>Ações</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>João Silva</td>
                                    <td>Auxílio Transporte</td>
                                    <td>01/04/2025</td>
                                    <td><span class="priority-high">Alta</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-eye"></i></button>
                                            <button class="btn btn-sm btn-outline-success"><i class="bi bi-check-lg"></i></button>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-x-lg"></i></button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Maria Santos</td>
                                    <td>Auxílio Material Didático</td>
                                    <td>20/04/2025</td>
                                    <td><span class="priority-medium">Média</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-eye"></i></button>
                                            <button class="btn btn-sm btn-outline-success"><i class="bi bi-check-lg"></i></button>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-x-lg"></i></button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Pedro Oliveira</td>
                                    <td>Auxílio Alimentação</td>
                                    <td>15/03/2025</td>
                                    <td><span class="priority-high">Alta</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-eye"></i></button>
                                            <button class="btn btn-sm btn-outline-success"><i class="bi bi-check-lg"></i></button>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-x-lg"></i></button>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Carla Mendes</td>
                                    <td>Auxílio Transporte</td>
                                    <td>28/03/2025</td>
                                    <td><span class="priority-low">Baixa</span></td>
                                    <td>
                                        <div class="action-buttons">
                                            <button class="btn btn-sm btn-outline-primary"><i class="bi bi-eye"></i></button>
                                            <button class="btn btn-sm btn-outline-success"><i class="bi bi-check-lg"></i></button>
                                            <button class="btn btn-sm btn-outline-danger"><i class="bi bi-x-lg"></i></button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card h-100">
                    <div class="card-header">Entrevistas Agendadas</div>
                    <div class="card-body overflow-scroll" id="entrevistasContainer">
                        <div class="d-flex justify-content-between align-items-center mb-3 p-3 bg-light rounded">
                            <div>
                                <h5 class="mb-0">João Silva</h5>
                                <small class="text-muted">Entrevista Inicial - Auxílio Transporte</small>
                                <br>
                                <small class="text-info">
                                    <i class="bi bi-geo-alt"></i> Presencial - Sala 201 - Bloco A
                                </small>
                            </div>
                            <div class="text-end">
                                <div class="fw-bold">Hoje, 14:00</div>
                                <span class="badge bg-danger mb-2">Alta</span>
                                <br>
                                <button class="btn btn-sm btn-outline-primary mt-1">Iniciar</button>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-3 p-3 bg-light rounded">
                            <div>
                                <h5 class="mb-0">Alice Souza</h5>
                                <small class="text-muted">Reavaliação - Auxílio Alimentação</small>
                                <br>
                                <small class="text-info">
                                    <i class="bi bi-camera-video"></i> Online - https://meet.google.com/abc-defg-hij
                                </small>
                            </div>
                            <div class="text-end">
                                <div class="fw-bold">Hoje, 16:00</div>
                                <span class="badge bg-warning mb-2">Média</span>
                                <br>
                                <button class="btn btn-sm btn-outline-primary mt-1">Iniciar</button>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-3 p-3 bg-light rounded">
                            <div>
                                <h5 class="mb-0">Maria Santos</h5>
                                <small class="text-muted">Acompanhamento - Auxílio Material Didático</small>
                                <br>
                                <small class="text-info">
                                    <i class="bi bi-camera-video"></i> Online - https://teams.microsoft.com/l/meetup-join/xyz123
                                </small>
                            </div>
                            <div class="text-end">
                                <div class="fw-bold">Amanhã, 10:30</div>
                                <span class="badge bg-success mb-2">Baixa</span>
                                <br>
                                <button class="btn btn-sm btn-outline-secondary mt-1">Reagendar</button>
                            </div>
                        </div>
                        <div class="d-flex justify-content-end mt-3">
                            <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#novaEntrevistaModal">Nova Entrevista</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="row mt-4">
            <div class="col-12">
                <div class="card documents">
                    <div class="card-header">Documentos Pendentes</div>
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                <h5 class="mb-0">João Silva</h5>
                                <small class="text-muted">Comprovante de residência atualizado</small>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-outline-primary me-2"><i class="bi bi-eye"></i></button>
                                <button class="btn btn-sm btn-outline-success btn-aprovar" data-documento="joao-residencia">Aprovar</button>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <div>
                                <h5 class="mb-0">Maria Santos</h5>
                                <small class="text-muted">Comprovante de renda familiar</small>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-outline-primary me-2"><i class="bi bi-eye"></i></button>
                                <button class="btn btn-sm btn-outline-success btn-aprovar" data-documento="maria-renda">Aprovar</button>
                            </div>
                        </div>
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <h5 class="mb-0">Pedro Oliveira</h5>
                                <small class="text-muted">Declaração de matrícula</small>
                            </div>
                            <div>
                                <button class="btn btn-sm btn-outline-primary me-2"><i class="bi bi-eye"></i></button>
                                <button class="btn btn-sm btn-outline-success btn-aprovar" data-documento="pedro-matricula">Aprovar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Nova Entrevista -->
    <div class="modal fade" id="novaEntrevistaModal" tabindex="-1" aria-labelledby="novaEntrevistaModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="novaEntrevistaModalLabel">
                        <i class="bi bi-calendar-plus me-2"></i>Agendar Nova Entrevista
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="novaEntrevistaForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="alunoNome" class="form-label">
                                        <i class="bi bi-person me-1"></i>Nome do Aluno
                                    </label>
                                    <input type="text" class="form-control" id="alunoNome" placeholder="Digite o nome completo do aluno..." required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="tipoEntrevista" class="form-label">
                                        <i class="bi bi-clipboard me-1"></i>Tipo de Entrevista
                                    </label>
                                    <select class="form-select" id="tipoEntrevista" required>
                                        <option value="">Selecione o tipo...</option>
                                        <option value="inicial">Entrevista Inicial</option>
                                        <option value="reavaliacao">Reavaliação</option>
                                        <option value="acompanhamento">Acompanhamento</option>
                                        <option value="renovacao">Renovação de Auxílio</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="dataEntrevista" class="form-label">
                                        <i class="bi bi-calendar me-1"></i>Data
                                    </label>
                                    <input type="date" class="form-control" id="dataEntrevista" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="horaEntrevista" class="form-label">
                                        <i class="bi bi-clock me-1"></i>Horário
                                    </label>
                                    <input type="time" class="form-control" id="horaEntrevista" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="duracao" class="form-label">
                                        <i class="bi bi-stopwatch me-1"></i>Duração (min)
                                    </label>
                                    <select class="form-select" id="duracao" required>
                                        <option value="30">30 minutos</option>
                                        <option value="45">45 minutos</option>
                                        <option value="60" selected>60 minutos</option>
                                        <option value="90">90 minutos</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="modalidade" class="form-label">
                                        <i class="bi bi-geo-alt me-1"></i>Modalidade
                                    </label>
                                    <select class="form-select" id="modalidade" required>
                                        <option value="presencial" selected>Presencial</option>
                                        <option value="online">Online</option>
                                        <option value="hibrido">Híbrido</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="local" class="form-label">
                                        <i class="bi bi-building me-1"></i>Local/Sala
                                    </label>
                                    <input type="text" class="form-control" id="local" placeholder="Ex: Sala 201 - Bloco A">
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label for="prioridade" class="form-label">
                                <i class="bi bi-exclamation-triangle me-1"></i>Prioridade
                            </label>
                            <select class="form-select" id="prioridade" required>
                                <option value="baixa">Baixa</option>
                                <option value="media" selected>Média</option>
                                <option value="alta">Alta</option>
                                <option value="urgente">Urgente</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label for="observacoes" class="form-label">
                                <i class="bi bi-chat-text me-1"></i>Observações
                            </label>
                            <textarea class="form-control" id="observacoes" rows="3" placeholder="Observações adicionais sobre a entrevista..."></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="notificarAluno">
                                <label class="form-check-label" for="notificarAluno">
                                    <i class="bi bi-bell me-1"></i>Notificar aluno por email
                                </label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="lembrete">
                                <label class="form-check-label" for="lembrete">
                                    <i class="bi bi-alarm me-1"></i>Criar lembrete 1 dia antes
                                </label>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="bi bi-x-circle me-1"></i>Cancelar
                    </button>
                    <button type="button" class="btn btn-success" id="agendarEntrevista">
                        <i class="bi bi-check-circle me-1"></i>Agendar Entrevista
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Menu toggle functionality
        document.addEventListener('DOMContentLoaded', function() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('mainContent');
            const menuToggle = document.getElementById('menuToggle');
            const closeSidebar = document.getElementById('closeSidebar');
            
            // Close sidebar button
            closeSidebar.addEventListener('click', function() {
                sidebar.classList.add('collapsed');
                mainContent.classList.add('expanded');
                menuToggle.classList.add('visible');
            });
            
            // Open sidebar button
            menuToggle.addEventListener('click', function() {
                sidebar.classList.remove('collapsed');
                mainContent.classList.remove('expanded');
                menuToggle.classList.remove('visible');
            });

            // Nova Entrevista Modal functionality
            const agendarBtn = document.getElementById('agendarEntrevista');
            const novaEntrevistaForm = document.getElementById('novaEntrevistaForm');
            
            // Set minimum date to today
            const dataEntrevista = document.getElementById('dataEntrevista');
            const today = new Date().toISOString().split('T')[0];
            dataEntrevista.setAttribute('min', today);
            
            // Modalidade change handler
            const modalidadeSelect = document.getElementById('modalidade');
            const localInput = document.getElementById('local');
            
            modalidadeSelect.addEventListener('change', function() {
                if (this.value === 'online') {
                    localInput.placeholder = 'Ex: https://meet.google.com/abc-defg-hij';
                    localInput.value = '';
                } else if (this.value === 'presencial') {
                    localInput.placeholder = 'Ex: Sala 201 - Bloco A';
                    localInput.value = '';
                } else if (this.value === 'hibrido') {
                    localInput.placeholder = 'Ex: Sala 201 + https://meet.google.com/...';
                    localInput.value = '';
                }
            });
            
            // Agendar entrevista
            agendarBtn.addEventListener('click', function() {
                const form = novaEntrevistaForm;
                const formData = new FormData(form);
                
                // Validation
                const alunoNome = document.getElementById('alunoNome');
                const tipoEntrevista = document.getElementById('tipoEntrevista');
                const dataEntrevista = document.getElementById('dataEntrevista');
                const horaEntrevista = document.getElementById('horaEntrevista');
                const modalidade = document.getElementById('modalidade');
                const prioridade = document.getElementById('prioridade');
                
                if (!alunoNome.value.trim() || !tipoEntrevista.value || !dataEntrevista.value || 
                    !horaEntrevista.value || !modalidade.value || !prioridade.value) {
                    alert('Por favor, preencha todos os campos obrigatórios.');
                    return;
                }
                
                // Validate student name length
                if (alunoNome.value.trim().length < 3) {
                    alert('Por favor, digite o nome completo do aluno (mínimo 3 caracteres).');
                    alunoNome.focus();
                    return;
                }
                
                // Validate date is not in the past
                const selectedDate = new Date(dataEntrevista.value + 'T' + horaEntrevista.value);
                const now = new Date();
                
                if (selectedDate <= now) {
                    alert('A data e horário da entrevista devem ser futuros.');
                    return;
                }
                
                // Simulate API call
                agendarBtn.innerHTML = '<i class="bi bi-hourglass-split me-1"></i>Agendando...';
                agendarBtn.disabled = true;
                
                setTimeout(function() {
                    // Create new interview element
                    const novaEntrevista = criarElementoEntrevista({
                        nome: alunoNome.value.trim(),
                        tipo: tipoEntrevista.options[tipoEntrevista.selectedIndex].text,
                        data: dataEntrevista.value,
                        hora: horaEntrevista.value,
                        modalidade: modalidade.value,
                        local: document.getElementById('local').value || 'A definir',
                        prioridade: prioridade.value
                    });
                    
                    // Add to interviews list
                    const entrevistasContainer = document.querySelector('#entrevistasContainer');
                    const novaEntrevistaBtn = document.querySelector('.d-flex.justify-content-end.mt-3');
                    entrevistasContainer.insertBefore(novaEntrevista, novaEntrevistaBtn);
                    
                    // Success simulation
                    alert('Entrevista agendada com sucesso para ' + alunoNome.value.trim() + '!');
                    
                    // Reset form
                    form.reset();
                    
                    // Reset button
                    agendarBtn.innerHTML = '<i class="bi bi-check-circle me-1"></i>Agendar Entrevista';
                    agendarBtn.disabled = false;
                    
                    // Close modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('novaEntrevistaModal'));
                    modal.hide();
                    
                    // Optionally refresh the entrevistas list here
                    // location.reload(); // uncomment to refresh page
                    
                }, 1500);
            });
            
            // Reset form when modal is hidden
            document.getElementById('novaEntrevistaModal').addEventListener('hidden.bs.modal', function() {
                novaEntrevistaForm.reset();
                localInput.placeholder = 'Ex: Sala 201 - Bloco A';
            });

            // Document approval functionality
            const botoesAprovar = document.querySelectorAll('.btn-aprovar');
            botoesAprovar.forEach(botao => {
                botao.addEventListener('click', function() {
                    const documentoId = this.getAttribute('data-documento');
                    aprovarDocumento(this, documentoId);
                });
            });
        });

        // Function to create new interview element
        function criarElementoEntrevista(dados) {
            const div = document.createElement('div');
            div.className = 'd-flex justify-content-between align-items-center mb-3 p-3 bg-light rounded nova-entrevista';
            
            // Format date
            const dataFormatada = formatarDataHora(dados.data, dados.hora);
            
            // Determine button style based on date
            const agora = new Date();
            const dataEntrevista = new Date(dados.data + 'T' + dados.hora);
            const isToday = dataEntrevista.toDateString() === agora.toDateString();
            const isFuture = dataEntrevista > agora;
            
            let buttonClass = 'btn-outline-secondary';
            let buttonText = 'Reagendar';
            
            if (isToday && isFuture) {
                buttonClass = 'btn-outline-primary';
                buttonText = 'Iniciar';
            } else if (isFuture) {
                buttonClass = 'btn-outline-secondary';
                buttonText = 'Reagendar';
            }
            
            // Determine icon based on modality
            let modalidadeIcon = 'bi-geo-alt';
            let modalidadeText = dados.modalidade;
            
            if (dados.modalidade === 'online') {
                modalidadeIcon = 'bi-camera-video';
                modalidadeText = 'Online';
            } else if (dados.modalidade === 'presencial') {
                modalidadeIcon = 'bi-geo-alt';
                modalidadeText = 'Presencial';
            } else if (dados.modalidade === 'hibrido') {
                modalidadeIcon = 'bi-hybrid';
                modalidadeText = 'Híbrido';
            }
            
            div.innerHTML = `
                <div>
                    <h5 class="mb-0">${dados.nome}</h5>
                    <small class="text-muted">${dados.tipo}</small>
                    <br>
                    <small class="text-info">
                        <i class="${modalidadeIcon}"></i> ${modalidadeText}${dados.local ? ' - ' + dados.local : ''}
                    </small>
                </div>
                <div class="text-end">
                    <div class="fw-bold">${dataFormatada}</div>
                    <span class="badge bg-${getPrioridadeCor(dados.prioridade)} mb-2">${capitalizarPrioridade(dados.prioridade)}</span>
                    <br>
                    <button class="btn btn-sm ${buttonClass} mt-1">${buttonText}</button>
                </div>
            `;
            
            // Add animation
            div.style.opacity = '0';
            div.style.transform = 'translateY(-10px)';
            
            setTimeout(() => {
                div.style.transition = 'all 0.3s ease';
                div.style.opacity = '1';
                div.style.transform = 'translateY(0)';
            }, 100);
            
            return div;
        }

        // Function to format date and time
        function formatarDataHora(data, hora) {
            const dataObj = new Date(data + 'T' + hora);
            const agora = new Date();
            
            const options = { 
                weekday: 'long', 
                day: '2-digit', 
                month: '2-digit',
                hour: '2-digit', 
                minute: '2-digit' 
            };
            
            if (dataObj.toDateString() === agora.toDateString()) {
                return `Hoje, ${hora}`;
            } else {
                const amanha = new Date(agora);
                amanha.setDate(amanha.getDate() + 1);
                
                if (dataObj.toDateString() === amanha.toDateString()) {
                    return `Amanhã, ${hora}`;
                } else {
                    return dataObj.toLocaleDateString('pt-BR', { 
                        day: '2-digit', 
                        month: '2-digit',
                        year: dataObj.getFullYear() !== agora.getFullYear() ? 'numeric' : undefined
                    }) + `, ${hora}`;
                }
            }
        }

        // Function to get priority color
        function getPrioridadeCor(prioridade) {
            switch(prioridade.toLowerCase()) {
                case 'baixa':
                    return 'success';
                case 'media':
                case 'média':
                    return 'warning';
                case 'alta':
                    return 'danger';
                case 'urgente':
                    return 'dark';
                default:
                    return 'secondary';
            }
        }

        // Function to capitalize priority
        function capitalizarPrioridade(prioridade) {
            return prioridade.charAt(0).toUpperCase() + prioridade.slice(1);
        }

        // Function to approve document
        function aprovarDocumento(botao, documentoId) {
            // Change button to loading state
            const textoOriginal = botao.innerHTML;
            botao.innerHTML = '<i class="bi bi-hourglass-split"></i> Aprovando...';
            botao.disabled = true;
            
            // Simulate API call
            setTimeout(() => {
                // Change to approved state - only icon
                botao.innerHTML = '<i class="bi bi-check-circle-fill text-success"></i>';
                botao.className = 'btn btn-sm btn-outline-success disabled';
                botao.disabled = true;
                botao.style.border = 'none';
                botao.style.backgroundColor = 'transparent';
                
                // Add visual feedback to the document row
                const documentRow = botao.closest('.d-flex');
                documentRow.style.backgroundColor = '#d4edda';
                documentRow.style.border = '1px solid #c3e6cb';
                documentRow.style.borderRadius = '5px';
                documentRow.style.transition = 'all 0.3s ease';
                
                // Add approved badge to document name - only text
                const documentInfo = documentRow.querySelector('small');
                if (!documentInfo.querySelector('.badge-aprovado')) {
                    const badge = document.createElement('span');
                    badge.className = 'badge bg-success ms-2 badge-aprovado';
                    badge.innerHTML = 'Aprovado';
                    documentInfo.appendChild(badge);
                }
                
                // Optional: Show success message
                // alert('Documento aprovado com sucesso!');
                
            }, 1500);
        }
    </script>
</body>
</html>
