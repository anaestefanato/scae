{% extends 'base2.html' %}
{% block title %}Histórico de Recebimentos{% endblock %}

{% block head %}
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body, .main-content, .container, .card, .table, h2, h3, h4, h5, h6, .btn, .form-select, .modal-content {
    font-family: 'Poppins', sans-serif !important;
}
</style>
{% endblock %}
{% block content %}
<div class="page-historico" style="min-height: 100vh; display: flex; flex-direction: column;">
    <main style="flex: 1; display: flex; flex-direction: column; justify-content: flex-start;">
        <div class="container py-4">
            <h2 class="mb-4">Histórico de Recebimentos</h2>
            <div class="row mb-4">
                <div class="col-md-4 mb-3">
                    <div class="card stats-card text-center">
                        <div class="number">R$ 1.400,00</div>
                        <div class="label">Total Recebido</div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card stats-card text-center">
                        <div class="number">7</div>
                        <div class="label">Meses Recebidos</div>
                    </div>
                </div>
                <div class="col-md-4 mb-3">
                    <div class="card stats-card text-center">
                        <div class="number">2</div>
                        <div class="label">Tipos de Auxílio</div>
                    </div>
                </div>
            </div>
            <div class="row mb-4">
                <div class="col-md-8 mb-3">
                    <div class="card table-card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <span>Recebimentos Recentes</span>
                            <select class="form-select w-auto" style="font-size:0.95rem;" onchange="filtrarAuxilio(this.value)">
                                <option value="todos">Todos</option>
                                <option value="alimentacao">Alimentação</option>
                                <option value="transporte">Transporte</option>
                            </select>
                        </div>
                        <div class="card-body p-0">
                            <table class="table table-striped mb-0" id="tabelaRecebimentos">
                                <thead>
                                    <tr>
                                        <th>Auxílio</th>
                                        <th>Referente ao Mês</th>
                                        <th>Valor</th>
                                        <th>Status</th>
                                        <th>Data de Recebimento</th>
                                        <th>Detalhes</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr data-auxilio="alimentacao">
                                        <td>Alimentação</td>
                                        <td>Julho/2025</td>
                                        <td>R$ 200,00</td>
                                        <td><span class="status-badge status-deferido">Confirmado</span></td>
                                        <td>10/07/2025</td>
                                        <td><button class="btn btn-sm btn-outline-info" onclick="mostrarDetalhes('Alimentação', 'Julho/2025', 'R$ 200,00', '10/07/2025')">Ver</button></td>
                                    </tr>
                                    <tr data-auxilio="transporte">
                                        <td>Transporte</td>
                                        <td>Julho/2025</td>
                                        <td>R$ 150,00</td>
                                        <td><span class="status-badge status-deferido">Confirmado</span></td>
                                        <td>10/07/2025</td>
                                        <td><button class="btn btn-sm btn-outline-info" onclick="mostrarDetalhes('Transporte', 'Julho/2025', 'R$ 150,00', '10/07/2025')">Ver</button></td>
                                    </tr>
                                    <tr data-auxilio="alimentacao">
                                        <td>Alimentação</td>
                                        <td>Junho/2025</td>
                                        <td>R$ 200,00</td>
                                        <td><span class="status-badge status-deferido">Confirmado</span></td>
                                        <td>10/06/2025</td>
                                        <td><button class="btn btn-sm btn-outline-info" onclick="mostrarDetalhes('Alimentação', 'Junho/2025', 'R$ 200,00', '10/06/2025')">Ver</button></td>
                                    </tr>
                                    <tr data-auxilio="transporte">
                                        <td>Transporte</td>
                                        <td>Junho/2025</td>
                                        <td>R$ 150,00</td>
                                        <td><span class="status-badge status-deferido">Confirmado</span></td>
                                        <td>10/06/2025</td>
                                        <td><button class="btn btn-sm btn-outline-info" onclick="mostrarDetalhes('Transporte', 'Junho/2025', 'R$ 150,00', '10/06/2025')">Ver</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 mb-3 d-flex align-items-center justify-content-center">
                    <div class="card w-100 p-3">
                        <h6 class="mb-3">Gráfico de Recebimentos</h6>
                        <canvas id="graficoRecebimentos" style="width:100%;max-width:300px;height:180px;"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- Modal Detalhes Recebimento -->
    <div id="modalDetalhesRecebimento" class="modal fade" tabindex="-1" role="dialog" aria-modal="true" style="display:none; background: rgba(0,0,0,0.4);">
        <div class="modal-dialog modal-md modal-dialog-centered" role="document">
            <div class="modal-content shadow-lg">
                <div class="modal-header bg-success text-white">
                    <h5 class="modal-title">Detalhes do Recebimento</h5>
                    <button type="button" class="btn-close btn-close-white" aria-label="Fechar" onclick="fecharModalDetalhesRecebimento()"></button>
                </div>
                <div class="modal-body" id="detalhesRecebimentoBody">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" onclick="fecharModalDetalhesRecebimento()">Fechar</button>
                </div>
            </div>
        </div>
    </div>
</div>
<style>
@media (max-width: 768px) {
    .container { padding: 10px !important; }
    h2 { font-size: 1.1rem; }
    .stats-card .number { font-size: 1.5rem; }
    .stats-card .label { font-size: 0.95rem; }
    .table-card { margin-bottom: 20px; }
    .table th, .table td { font-size: 0.90rem; padding: 7px; }
    .card { font-size: 0.95rem; }
    .btn { font-size: 0.95rem; }
}
/* Gráfico fictício */
</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
// Filtro de auxílio
function filtrarAuxilio(tipo) {
    var linhas = document.querySelectorAll('#tabelaRecebimentos tbody tr');
    linhas.forEach(function(linha) {
        if (tipo === 'todos' || linha.getAttribute('data-auxilio') === tipo) {
            linha.style.display = '';
        } else {
            linha.style.display = 'none';
        }
    });
}
// Modal detalhes
function mostrarDetalhes(auxilio, mes, valor, data) {
    var body = document.getElementById('detalhesRecebimentoBody');
    body.innerHTML = `<p><strong>Auxílio:</strong> ${auxilio}</p>
        <p><strong>Mês:</strong> ${mes}</p>
        <p><strong>Valor:</strong> ${valor}</p>
        <p><strong>Data de Recebimento:</strong> ${data}</p>
        <p><strong>Status:</strong> <span class='status-badge status-deferido'>Confirmado</span></p>
        <p><strong>Observações:</strong> Recebimento realizado com sucesso. Para dúvidas, entre em contato com a assistência social.</p>`;
    document.getElementById('modalDetalhesRecebimento').style.display = 'block';
    document.getElementById('modalDetalhesRecebimento').classList.add('show');
}
function fecharModalDetalhesRecebimento() {
    document.getElementById('modalDetalhesRecebimento').style.display = 'none';
    document.getElementById('modalDetalhesRecebimento').classList.remove('show');
}
// Gráfico fictício
document.addEventListener('DOMContentLoaded', function() {
    var ctx = document.getElementById('graficoRecebimentos').getContext('2d');
    new Chart(ctx, {
        type: 'bar',
        data: {
            labels: ['Abr', 'Mai', 'Jun', 'Jul'],
            datasets: [
                {
                    label: 'Alimentação',
                    data: [200, 200, 200, 200],
                    backgroundColor: '#2E7D32',
                },
                {
                    label: 'Transporte',
                    data: [150, 150, 150, 150],
                    backgroundColor: '#4CAF50',
                }
            ]
        },
        options: {
            responsive: true,
            plugins: { legend: { position: 'bottom' } },
            scales: { y: { beginAtZero: true } }
        }
    });
});
</script>
</style>
{% endblock %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recebimentos</title>
</head>
<body>
    <h1>Recebimentos</h1>
</body>
</html>